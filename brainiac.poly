/* brainiac.c */                                           ║#  Brainiac.py                                           ║(* Brainiac.Mod *)                                       ║!brainiac.f90                                            ║// Brainiac.java                                         ║// brainiac.go                                                 
#include <stdint.h>                                        ║                                                         ║MODULE Brainiac;                                         ║PROGRAM Brainiac                                         ║import java.io.*;                                        ║package main                                             
#include <stdbool.h>                                       ║import sys                                               ║                                                         ║implicit none                                            ║public class Brainiac {                                  ║import "fmt"                                                         
#include <stdio.h>                                         ║import numpy as np                                       ║IMPORT Args := extArgs, Err := extErr, Out, Files;       ║                                                         ║                                                         ║import "os"                                             
#include <stdlib.h>                                        ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║CONST                                                    ║                                                         ║                                                         ║const (                                                    
#define PYRAMIDAL 0                                        ║PYRAMIDAL = 0                                            ║  PYRAMIDAL = 0;                                         ║ integer, parameter :: PYRAMIDAL = 0                     ║  final static int PYRAMIDAL = 0;                        ║  PYRAMIDAL = 0                                            
#define INHIBITOR 1                                        ║INHIBITOR = 1                                            ║  INHIBITOR = 1;                                         ║ integer, parameter :: INHIBITOR = 1                     ║  final static int INHIBITOR = 1;                        ║  INHIBITOR = 1                                            
#define SPD   40  // Synapses per Dendrite                 ║SPD = 40   # Synapses per Dendrite                       ║  SPD = 40; (* Synapses per Dendrite *)                  ║ integer, parameter :: SPD = 40                          ║  final static int SPD = 40; // Synapses per Dendrite    ║  SPD = 40  // Synapses per Dendrite                       
#define DSZ   40 * 4 // 32 bits per Synapse                ║DSZ = 40 * 4 # 32 bits per Synapse                       ║  DSZ = 40 * 4; (* 32 bits per Synapse *)                ║ integer, parameter :: DSZ = 40 * 4                      ║  final static int DSZ = 40 * 4; // 32 bits per Synapse  ║  DSZ = 40 * 4 // 32 bits per Synapse                      
#define PPP   32  // Proximal per Pyramidal                ║PPP = 32   # Proximal per Pyramidal                      ║  PPP = 32; (* Proximal per Pyramidal *)                 ║ integer, parameter :: PPP = 32                          ║  final static int PPP = 32; // Proximal per Pyramidal   ║  PPP = 32  // Proximal per Pyramidal                      
#define BPP   32  // Basal per Pyramidal                   ║BPP = 32   # Basal per Pyramidal                         ║  BPP = 32; (* Basal per Pyramidal *)                    ║ integer, parameter :: BPP = 32                          ║  final static int BPP = 32; // Basal per Pyramidal      ║  BPP = 32  // Basal per Pyramidal                         
#define APP   32  // Apical per Pyramidal                  ║APP = 32   # Apical per Pyramidal                        ║  APP = 32; (* Apical per Pyramidal *)                   ║ integer, parameter :: APP = 32                          ║  final static int APP = 32; // Apical per Pyramidal     ║  APP = 32  // Apical per Pyramidal                        
#define DPN   32 + 32 + 32                                 ║DPN = 32 + 32 + 32                                       ║  DPN = 32 + 32 + 32;                                    ║ integer, parameter :: DPN = 32 + 32 + 32                ║  final static int DPN = 32 + 32 + 32;                   ║  DPN = 32 + 32 + 32                                       
#define PinL2   28  // Pyramidal in L2                     ║PinL2 = 28   # Pyramidal in L2                           ║  PinL2 = 28; (* Pyramidal in L2 *)                      ║ integer, parameter :: PinL2 = 28                        ║  final static int PinL2 = 28; // Pyramidal in L2        ║  PinL2 = 28  // Pyramidal in L2                           
#define Acc2    28                                         ║Acc2  = 28                                               ║  Acc2  = 28;                                            ║ integer, parameter :: Acc2  = 28                        ║  final static int Acc2  = 28;                           ║  Acc2  = 28                                               
#define PinL4   28  // Pyramidal in L4                     ║PinL4 = 28   # Pyramidal in L4                           ║  PinL4 = 28; (* Pyramidal in L4 *)                      ║ integer, parameter :: PinL4 = 28                        ║  final static int PinL4 = 28; // Pyramidal in L4        ║  PinL4 = 28  // Pyramidal in L4                           
#define Acc4    56                                         ║Acc4  = 28 + PinL2                                       ║  Acc4  = 28 + PinL2;                                    ║ integer, parameter :: Acc4  = 28 + PinL2                ║  final static int Acc4  = 28 + PinL2;                   ║  Acc4  = 28 + PinL2                                       
#define PinL5   28  // Pyramidal in L5                     ║PinL5 = 28   # Pyramidal in L5                           ║  PinL5 = 28; (* Pyramidal in L5 *)                      ║ integer, parameter :: PinL5 = 28                        ║  final static int PinL5 = 28; // Pyramidal in L5        ║  PinL5 = 28  // Pyramidal in L5                           
#define Acc5    84                                         ║Acc5  = 28 + Acc4                                        ║  Acc5  = 28 + Acc4;                                     ║ integer, parameter :: Acc5  = 28 + Acc4                 ║  final static int Acc5  = 28 + Acc4;                    ║  Acc5  = 28 + Acc4                                        
#define PinL6   28  // Pyramidal in L6                     ║PinL6 = 28   # Pyramidal in L6                           ║  PinL6 = 28; (* Pyramidal in L6 *)                      ║ integer, parameter :: PinL6 = 28                        ║  final static int PinL6 = 28; // Pyramidal in L6        ║  PinL6 = 28  // Pyramidal in L6                           
#define Acc6    112                                        ║Acc6  = 28 + Acc5                                        ║  Acc6  = 28 + Acc5;                                     ║ integer, parameter :: Acc6  = 28 + Acc5                 ║  final static int Acc6  = 28 + Acc5;                    ║  Acc6  = 28 + Acc5                                        
#define PinTh   4   // Pyramidal in Thalmus                ║PinTh = 4    # Pyramidal in Thalmus                      ║  PinTh = 4;  (* Pyramidal in Thalmus *)                 ║ integer, parameter :: PinTh = 4                         ║  final static int PinTh = 4;  // Pyramidal in Thalmus   ║  PinTh = 4   // Pyramidal in Thalmus                      
#define AccTh   116                                        ║AccTh = 4  + Acc6                                        ║  AccTh = 4  + Acc6;                                     ║ integer, parameter :: AccTh = 4  + Acc6                 ║  final static int AccTh = 4  + Acc6;                    ║  AccTh = 4  + Acc6                                        
#define MCinC   96 // 128 // Minicolumns in a Column       ║MCinC = 96   # Minicolumns in a Column                   ║  MCinC = 96 ;(* Minicolumns in a Column *)              ║ integer, parameter :: MCinC = 96                        ║  final static int MCinC = 96 ; // Minicolumns per Column║  MCinC = 96  // Minicolumns in a Column                   
#define CinP    9   // Columns in a Patch                  ║CinP = 9    # Columns in a Patch                         ║  CinP = 9 ; (* Columns in a Patch *)                    ║ integer, parameter :: CinP = 9                          ║  final static int CinP = 9  ; // Columns in a Patch     ║  CinP = 9    // Columns in a Patch                    
#define NP      100224 // 152064                           ║NP = 100224                                              ║  NP = 100224;                                           ║ integer, parameter :: NP = 100224                       ║  final static int NP = 100224;                          ║  NP = 100224                                              
#define brainN  10000000000 // neurons in the cortex       ║                                                         ║                                                         ║                                                         ║                                                         ║)                                                        
#define brainP  100000 // patches in the cortex            ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
#define flyN    200000 // 50% Central vs Optic             ║                                                         ║TYPE                                                     ║                                                         ║                                                         ║                                                         
#define flyS    800 // synapses per neuron                 ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
#define brainS  30000 // synapses per pyramidal neuron     ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
#define DforSp  135 // 20 of 135 act clustered fr spike?   ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
#define NtoN    5 // avg syn contacts axon2axon            ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
#define CforSp  20 // 20 connections per spike?            ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
typedef int32_t Potential;                                 ║                                                         ║  Potential = INTEGER;                                   ║                                                         ║  public static class Potential{                         ║type Potential struct { excited bool }                                                         
                                                           ║                                                         ║                                                         ║                                                         ║    Boolean excited;                                     ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
typedef int32_t Synapse;                                   ║                                                         ║  Synapse = INTEGER;                                     ║                                                         ║  public static class Synapse{                           ║type Synapse *Potential                                  
                                                           ║                                                         ║                                                         ║                                                         ║    int Potential;                                       ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
typedef struct { Synapse s[SPD];} Dendrite;                ║                                                         ║  Dendrite = ARRAY SPD OF Synapse;                       ║                                                         ║  public static class Dendrite{                          ║type Dendrite [SPD]Synapse                                                                                  
                                                           ║                                                         ║                                                         ║                                                         ║    Synapse s;                                           ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║    public Dendrite(){                                   ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║    }                                                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                         
typedef struct {                                           ║class Neuron:                                            ║  Neuron    = RECORD                                     ║                                                         ║  public static class Pyramidal{                         ║type Pyramidal struct {                                                                                     
       uint16_t Kind;                                      ║  def __init__(self,p,fpex,fdnd):                        ║             State: INTEGER;                             ║                                                         ║    int State;                                           ║       State Potential                                                                                      
                                                           ║    data = fpex.read(2)                                  ║             Kind: INTEGER;                              ║                                                         ║    Dendrite[] Proximal;                                 ║       Proximal [PPP]Dendrite                                                                               
       uint16_t State;                                     ║    self.Kind  =   int.from_bytes(data, "little")        ║             De:    ARRAY DPN OF Dendrite                ║                                                         ║    Dendrite[] Basal;                                    ║       Basal [BPP]Dendrite                                                                                  
                                                           ║    data = fpex.read(2)                                  ║                                                         ║                                                         ║    Dendrite[] Apical;                                   ║       Apical [APP]Dendrite                                                                                 
       Dendrite De[DPN];                                   ║    self.State =   int.from_bytes(data, "little")        ║           END;                                          ║                                                         ║                                                         ║     }                                                                                                      
                                                           ║                                                         ║                                                         ║                                                         ║    public Pyramidal(){                                  ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           State = 0;                                    ║                                                         
     } Neuron;                                             ║    data = fdnd.read(4*SPD*DPN)                          ║                                                         ║                                                         ║           Proximal = new Dendrite[PPP];                 ║                                                         
                                                           ║    self.De=np.frombuffer(data, dtype=np.int32)          ║                                                         ║                                                         ║           Basal = new Dendrite[BPP];                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           Apical = new Dendrite[APP];                   ║                                                        
                                                           ║                                                         ║                                                         ║                                                         ║    }                                                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
typedef struct {                                           ║class Minicolumn:                                        ║  Minicolumn = RECORD                                    ║                                                         ║  public static class Minicolumn{                        ║type Minicolumn struct {                                                                                    
         Neuron     N[AccTh];                              ║ def __init__(self,mc,fpex,fdnd):                        ║                  N: ARRAY AccTh OF Neuron               ║                                                         ║    Pyramidal[] L2;                                      ║       L2 [PinL2]Pyramidal                                                       
                                                           ║  self.N=[   Neuron(p,fpex,fdnd) for p in range(AccTh)]  ║                  END;                                   ║                                                         ║    Pyramidal[] L4;                                      ║       L4 [PinL4]Pyramidal                                                       
                                                           ║                                                         ║                                                         ║                                                         ║    Pyramidal[] L5;                                      ║       L5 [PinL5]Pyramidal                                                       
                                                           ║                                                         ║                                                         ║                                                         ║    Pyramidal[] L6;                                      ║       L6 [PinL6]Pyramidal                                                        
                                                           ║                                                         ║                                                         ║                                                         ║    Pyramidal[] Th;                                      ║       Th [PinTh]Pyramidal                           
     } Minicolumn;                                         ║                                                         ║                                                         ║                                                         ║                                                         ║     }                                                   
                                                           ║                                                         ║                                                         ║                                                         ║    public Minicolumn(){                                 ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           L2 = new Pyramidal[PinL2];                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           L4 = new Pyramidal[PinL4];                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           L5 = new Pyramidal[PinL5];                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           L6 = new Pyramidal[PinL6];                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           Th = new Pyramidal[PinTh];                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║    }                                                    ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
typedef struct {                                           ║class Column:                                            ║  Column = RECORD                                        ║                                                         ║  public static class Column{                            ║type Column struct {                                                                                    
         Minicolumn MC[MCinC];                             ║ def __init__(self,c,fpex,fdnd):                         ║                 MC: ARRAY MCinC OF Minicolumn           ║                                                         ║    Minicolumn[] MC;                                     ║       MC [MCinC]Minicolumn                                                       
     } Column;                                             ║  self.MC=[Minicolumn(m,fpex,fdnd) for m in range(MCinC)]║               END;                                      ║                                                         ║                                                         ║     }                                                      
                                                           ║                                                         ║                                                         ║                                                         ║    public Column(){                                     ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           MC = new Minicolumn[MCinC];                   ║                                                        
                                                           ║                                                         ║                                                         ║                                                         ║    }                                                    ║                                                        
                                                           ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                        
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                        
typedef struct {                                           ║class Patch:                                             ║  Patch = RECORD                                         ║INTEGER(4), DIMENSION(:), ALLOCATABLE :: P               ║  public static class Patch{                             ║type Patch  struct {                                                                                    
             Column  C[ CinP];                             ║  def __init__(self,fpex,fdnd):                          ║                  C: ARRAY CinP OF Column                ║INTEGER(4), DIMENSION(:), ALLOCATABLE :: S               ║    Column[] C;                                          ║       C [CinP]Column                                                           
     } Patch;                                              ║    self.C = [Column(c,fpex,fdnd) for c in range(CinP)]  ║               END;                                      ║                                                         ║                                                         ║     }                                                      
                                                           ║                                                         ║  PPatch = POINTER TO Patch;                             ║                                                         ║    public Patch(){                                      ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║           C = new Column[CinP];                         ║                                                              
                                                           ║                                                         ║                                                         ║                                                         ║    }                                                    ║                              
                                                           ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                        
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║call begin()                                             ║                                                         ║                                                         
                                                           ║                                                         ║VAR                                                      ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║  P: PPatch;                                             ║CONTAINS                                                 ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║PROCEDURE NL; BEGIN Out.Ln END NL;                       ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║PROCEDURE OI(I,X:INTEGER); BEGIN Out.Int(I,X) END OI;    ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║PROCEDURE OS(S:ARRAY OF CHAR);BEGIN Out.String(S) END OS;║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║PROCEDURE SAP(VAR t: ARRAY OF CHAR;s: ARRAY OF CHAR);    ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║VAR x,y:INTEGER; BEGIN x:=0; WHILE t[x]#0X DO INC(x) END;║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║  y:=0;WHILE s[y]#0X DO t[x]:=s[y];INC(x);INC(y) END;    ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║  t[x]:=0X;                                              ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║END SAP;                                                 ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
  void la2sa( int a,int*c,int*mc,int*ni,int*lv,int*lvo ){  ║def la2sa( a ):                                          ║PROCEDURE la2sa(a:INTEGER; VAR c,mc,ni,lv,lvo: INTEGER); ║  SUBROUTINE la2sa(a,c,mc,lv,lvo)                        ║  public static int[] la2sa( int a){                     ║func la2sa( a int )(c,mc,lv,lvo int){                                                                                 
    *ni = a % AccTh;                                       ║  ni=a % AccTh                                           ║                                                         ║    implicit none                                        ║                                                         ║   mci:=a % AccTh                                                                                                  
    int mco = a  / AccTh; *mc = mco % MCinC;               ║  mco = a // AccTh;       mc = mco % MCinC               ║VAR mco,co: INTEGER;                                     ║    integer, INTENT(IN) :: a                             ║    int r[] = new int[4]; //c,mc,lv,lvo                  ║   mco:= a / AccTh;       mc = mco % MCinC                                                                       
    int co = a / (AccTh*MCinC); *c= co % CinP;             ║  co = a // (AccTh*MCinC); c= co % CinP                  ║BEGIN  ni := a MOD AccTh; mco := a DIV AccTh;            ║    integer, INTENT(INOUT) :: c,mc,lv,lvo                ║                             int mci = a  % AccTh;       ║   co:= a / (AccTh*MCinC); c= co % CinP                                                                          
    if      (*ni<PinL2) {*lv=0;  *lvo=*ni;                 ║  if        ni<PinL2:   lv=0;   lvo= ni                  ║ mc:=mco MOD MCinC;co:=a DIV(AccTh*MCinC);c:=co MOD CinP;║    integer :: np,mci,mco,co                             ║    int mco = a  / AccTh;r[1] = mco % MCinC;             ║   if       mci<PinL2{   lv=0;   lvo=mci                                                                          
    }else if(*ni<Acc4)  {*lv=1;  *lvo=*ni-PinL2;           ║  elif      ni<Acc4:    lv=1;   lvo= ni-PinL2            ║  IF     ni<PinL2 THEN lv:=0;  lvo:= ni                  ║                                                         ║    int co = a / (AccTh*MCinC);r[0]=co % CinP;           ║   }else if mci<Acc4{    lv=1;   lvo=mci-PinL2                                                                    
    }else if(*ni<Acc5)  {*lv=2;  *lvo=*ni-Acc4;            ║  elif      ni<Acc5:    lv=2;   lvo= ni-Acc4             ║  ELSIF  ni<Acc4  THEN lv:=1;  lvo:= ni-PinL2            ║    mci=mod(a,AccTh)                                     ║    if      (mci<PinL2) {r[2]=0;  r[3]=mci;              ║   }else if mci<Acc5{    lv=2;   lvo=mci-Acc4                                                                     
    }else if(*ni<Acc6)  {*lv=3;  *lvo=*ni-Acc5;            ║  elif      ni<Acc6:    lv=3;   lvo= ni-Acc5             ║  ELSIF  ni<Acc5  THEN lv:=2;  lvo:= ni-Acc4             ║    mco=a / AccTh                                        ║    }else if(mci<Acc4)  {r[2]=1;  r[3]=mci-PinL2;        ║   }else if mci<Acc6{    lv=3;   lvo=mci-Acc5                                                                     
    }else if(*ni<AccTh) {*lv=4;  *lvo=*ni-Acc6;            ║  elif      ni<AccTh:   lv=4;   lvo= ni-Acc6             ║  ELSIF  ni<Acc6  THEN lv:=3;  lvo:= ni-Acc5             ║    mc =mod(mco,MCinC)                                   ║    }else if(mci<Acc5)  {r[2]=2;  r[3]=mci-Acc4;         ║   }else if mci<AccTh{   lv=4;   lvo=mci-Acc6                                                                     
    }else               {*lv=-1; *lvo=-1;                  ║  else:                 lv=-1;  lvo=-1                   ║  ELSIF  ni<AccTh THEN lv:=4;  lvo:= ni-Acc6             ║    co =a /(AccTh*MCinC)                                 ║    }else if(mci<Acc6)  {r[2]=3;  r[3]=mci-Acc5;         ║   }else{                lv=-1;  lvo=-1  }                                                                        
    }                                                      ║  return c, mc, ni, lv, lvo                              ║  ELSE                 lv:=-1; lvo:=-1                   ║    c =mod(co,CinP)                                      ║    }else if(mci<AccTh) {r[2]=4;  r[3]=mci-Acc6;         ║   return c, mc, lv, lvo                                                                                          
  }                                                        ║                                                         ║  END                                                    ║    IF      (mci<PinL2) THEN;lv =0;  lvo =mci            ║    }else               {r[2]=-1; r[3]=-1;               ║}                                                        
                                                           ║                                                         ║END la2sa;                                               ║    ELSE IF (mci<Acc4)  THEN;lv =1;  lvo =mci-PinL2      ║    }                                                    ║                                                         
                                                           ║                                                         ║                                                         ║    ELSE IF (mci<Acc5)  THEN;lv =2;  lvo =mci-Acc4       ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║    ELSE IF (mci<Acc6)  THEN;lv =3;  lvo =mci-Acc5       ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║    ELSE IF (mci<AccTh) THEN;lv =4;  lvo =mci-Acc6       ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║    ELSE                    ;lv =-1; lvo =-1             ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║    END IF                                               ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║    return r;                                            ║                                                         
                                                           ║                                                         ║                                                         ║  END SUBROUTINE                                         ║  }                                                      ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
Patch * initialize( int argc, char *argv[]){               ║def initialize():                                        ║PROCEDURE initialize(VAR p: PPatch);                     ║  SUBROUTINE initialize( )                               ║  public static Patch initialize(String[] args){         ║func initialize() *Patch {                                    
  FILE * fpex; FILE * fdnd; int dp,   i,j ; Patch *P;      ║                                                         ║CONST td ="-9-96-4-28-28-28-28-32-32-32-40-0-0-0.dnd";   ║    implicit none                                        ║    int dp,c,mc,lv,lvo; int[] a;                         ║                                                      
  char  hdr[4096]; char dndfn[1024]; char pexfn[1024];     ║  P = None                                               ║      tp ="-9-96-4-28-28-28-28-0-0-0.pex";               ║    character(256) :: arg, td, tp                        ║                                                         ║  P:=new(Patch)                                                        
  if ( argc > 1 ) {                                        ║  if len(sys.argv) > 1:                                  ║VAR i,res,dp,c,mc,ni,lv,lvo:INTEGER;fdnd,fpex:Files.File;║    integer :: icount, dp,    astat,i,c,mc,lv,lvo        ║    Patch P;                                             ║                                                       
    printf("  initializing %s\n",argv[1]);                 ║    print(f"  initializing {sys.argv[1]}")               ║      arg,pexfn,dndfn:ARRAY 256 OF CHAR;                 ║                                                         ║                                                         ║  if len(os.Args) > 1 {
    sprintf(dndfn,"b-%s-%s",argv[1],                       ║    t="9-96-4-28-28-28-28-32-32-32-40-0-0-0.dnd"         ║      n: POINTER TO Neuron;rdnd,rpex:Files.Rider;        ║    icount = iargc()                                     ║    P = null;                                            ║    fmt.Println("  initializing", os.Args[1])            
      "9-96-4-28-28-28-28-32-32-32-40-0-0-0.dnd");         ║    dndfn=f"b-{sys.argv[1]}-{t}"                         ║BEGIN                                                    ║    if ( icount.gt.0 ) then                              ║    if (args.length > 0) {                               ║    pexfn:="b-"+os.Args[1]+
    sprintf(pexfn,"b-%s-%s",argv[1],                       ║    t="9-96-4-28-28-28-28-0-0-0.pex"                     ║  IF Args.count > 0 THEN Args.Get(0, arg, res);          ║      call getarg(1, arg)                                ║      System.out.println("  initializing "+args[0]);     ║         "-9-96-4-28-28-28-28-0-0-0.pex"; 
      "9-96-4-28-28-28-28-0-0-0.pex");                     ║    pexfn=f"b-{sys.argv[1]}-{t}"                         ║    IF res = 0 THEN                                      ║      print *,' initializing ', TRIM(arg)                ║      String pexfn="b-"+args[0]+                         ║    dndfn:="b-"+os.Args[1]+
    fpex = fopen(pexfn,"r");                               ║    try:                                                 ║      OS("  initializing "); OS(arg); NL;                ║      td="-9-96-4-28-28-28-28-32-32-32-40-0-0-0.dnd"     ║         "-9-96-4-28-28-28-28-0-0-0.pex";                ║         "-9-96-4-28-28-28-28-32-32-32-40-0-0-0.dnd";
    if(fpex){                                              ║      with open(pexfn,'br') as fpex:                     ║      pexfn:="b-";SAP(pexfn,arg);SAP(pexfn,tp);          ║      tp="-9-96-4-28-28-28-28-0-0-0.pex"                 ║      String dndfn="b-"+args[0]+                         ║    fpex, err1 := os.Open(pexfn)
      fdnd = fopen(dndfn,"r");                             ║        try:                                             ║      dndfn:="b-";SAP(dndfn,arg);SAP(dndfn,td);          ║      open (1,file="b-"//TRIM(arg)//tp, status = 'old')  ║         "-9-96-4-28-28-28-28-32-32-32-40-0-0-0.dnd";    ║    if err1 == nil {
      if(fdnd){                                            ║          with open(dndfn,"br") as fdnd:                 ║      fpex:=Files.Old(pexfn);                            ║      open (2,file="b-"//TRIM(arg)//td, status = 'old')  ║      try (                                              ║      fdnd, err2 := os.Open(dndfn)
        fgets(hdr,4096,(FILE *)fpex);                      ║            dp=SPD+PPP+BPP+APP                           ║      IF fpex # NIL  THEN                                ║                                                         ║        InputStream fpex = new FileInputStream(pexfn);   ║      if err2 == nil {
        dp= SPD+PPP+BPP+APP;                               ║                                                         ║        fdnd:=Files.Old(dndfn);                          ║                                                         ║        InputStream fdnd = new FileInputStream(dndfn);   ║        dp:= SPD+PPP+BPP+APP                           
         printf("   dendrites:    %d\n",dp*NP);            ║            print(f"   dendrites:    {dp*NP}")           ║        IF fdnd # NIL  THEN                              ║      dp= SPD+PPP+BPP+APP                                ║      ) {                                                ║        fmt.Println("   dendrites:   ", dp*NP)         
         printf("   p cells  :      %d\n",NP);             ║            print(f"   p cells  :      {NP}")            ║          Files.Set(rpex,fpex,0);                        ║      print *,'  dendrites:', dp*NP                      ║        dp= SPD+PPP+BPP+APP;                             ║        fmt.Println("   p cells  :     ", NP)                
         printf("   miniclmns:         %d\n",CinP*MCinC);  ║            print(f"   miniclmns:         {CinP*MCinC}") ║          Files.Set(rdnd,fdnd,0);                        ║      print *,'  p cells  :', NP                         ║        System.out.println("   dendrites:    "+dp*NP);   ║        fmt.Println("   miniclmns:        ", CinP*MCinC)      
         printf("   loading...\n");                        ║            print(f"   loading...")                      ║          dp:=SPD+PPP+BPP+APP;                           ║      print *,'  miniclmns:', CinP*MCinC                 ║        System.out.println("   p cells  :      "+NP);    ║        fmt.Println("   loading...")                         
         P = (Patch *)malloc(sizeof(Patch));               ║            P = Patch(fpex,fdnd)                         ║          OS("   dendrites:"); OI(dp*NP,12); NL;         ║      print *,'  loading...'                             ║        System.out.println("   miniclmns:         "+     ║        for i:=0; i<NP;i++{                                              
         int c,mc,ni,lv,lvo; uint16_t x;                   ║                                                         ║          OS("   p cells  :"); OI(NP,12); NL;            ║      ALLOCATE ( P(NP*dp), STAT = astat)                 ║                           CinP*MCinC);                  ║      //    c,mc,lv,lvo:=la2sa(i)             
         Neuron    *n; Dendrite *pd,*bd,*ad;               ║          # for i in range(NP):                          ║          OS("   miniclmns:"); OI(CinP*MCinC,12); NL;    ║      IF (astat /= 0) STOP "*** OOM ***"                 ║        System.out.println("   loading...");             ║      //  fmt.Println("--",i,c,mc,lv,lvo)
         for(i=0;i<NP;i++){                                ║          #   c,mc,ni,lv,lvo=la2sa(i)                    ║          OS("   loading...");                    NL;    ║      ALLOCATE ( S(np),    STAT = astat)                 ║        P = new Patch();                                 ║                                               
           la2sa(i,&c,&mc,&ni,&lv,&lvo);                   ║                                                         ║          NEW(p);                                        ║      IF (astat /= 0) STOP "*** OOM ***"                 ║        for(int i=0;i<NP;i++){                           ║                                                       
           n=&(P->C[c].MC[mc].N[ni]); n->State=x;          ║                                                         ║          i:=0; WHILE (i<NP) DO                          ║      DO i=0,NP-1                                        ║          a = la2sa(i);c=a[0];mc=a[1];lv=a[2];lvo=a[3];  ║                                                       
           if (fread (&x, 1, sizeof x, fpex) != sizeof x) {║                                                         ║            la2sa(i,c,mc,ni,lv,lvo);                     ║        call la2sa(i,c,mc,lv,lvo)                        ║//System.out.println("--"+i+" "+c+" "+mc+" "+lv+" "+lvo);║                                                                
              printf("  read pex kind?\n"); exit(1);       ║                                                         ║        (*  n:=p.C[c].MC[mc].N[ni]; *)                   ║!       print *,'--',i,c,mc,lv,lvo                       ║                                                         ║        }                                                                              
           }                                               ║                                                         ║            Files.ReadInt(rpex,p.C[c].MC[mc].N[ni].Kind);║                                                         ║        }                                                ║        fpex.Close()                                                                   
           n->Kind =x;                                     ║                                                         ║          Files.ReadInt(rpex,p.C[c].MC[mc].N[ni].State); ║                                                         ║      } catch (IOException ex) {                         ║        fdnd.Close()                                                                   
           if (fread (&x, 1, sizeof x, fpex) != sizeof x) {║                                                         ║                                                         ║      END DO                                             ║        ex.printStackTrace();                            ║      }else{                                                                           
              printf("  read pex state?\n"); exit(1);      ║                                                         ║                                                         ║                                                         ║      }                                                  ║        fmt.Println("  file",dndfn,"?",err2)                                           
           }                                               ║                                                         ║    (*      OS("--");OI(i,8);OI(c,8);OI(mc,8);           ║                                                         ║    }else{                                               ║      }                                                                                     
           n->State=x;                                     ║                                                         ║            OI(lv,8);OI(lvo,8);NL;      *)               ║                                                         ║      System.out.println("  parameter?");                ║    }else{                                               
           if (fread(n->De,1,DPN*DSZ,fdnd) != DPN*DSZ) {   ║                                                         ║            INC(i)                                       ║                                                         ║    }                                                    ║      fmt.Println("  file",pexfn,"?",err1)               
              printf("  read dnd?\n"); exit(1);            ║                                                         ║          END                                            ║    else                                                 ║    return P;                                            ║    }                                                    
           }                                               ║                                                         ║        ELSE  OS("  file "); OS(dndfn); OS("?"); NL;     ║      print *,' parameter?'                              ║  }                                                      ║  }else{                                                 
                                                           ║                                                         ║        END                                              ║    endif                                                ║                                                         ║    fmt.Println("  parameter?")                          
                                                           ║                                                         ║      ELSE  OS("  file "); OS(pexfn); OS("?"); NL;       ║    RETURN                                               ║                                                         ║  }                                                      
                                                           ║                                                         ║      END                                                ║  END SUBROUTINE                                         ║                                                         ║  return P                                               
                                                           ║                                                         ║    ELSE  OS("  config?"); NL;                           ║                                                         ║                                                         ║}                                                        
                                                           ║                                                         ║    END                                                  ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║  ELSE  OS("  parameter?"); NL;                          ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║  END                                                    ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║END initialize;                                          ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
//   printf("--%d,%d,%d,%d,%d,%d,%d\n",i,c,mc,ni,lv,lvo,x);║          #   print(f"--{i} {c} {mc} {ni} {lv} {lvo}")   ║                                                         ║                                                         ║                                                         ║                                                         
         }                                                 ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
      }else{                                               ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
        printf("  file %s?\n",dndfn);                      ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
      }                                                    ║        except Exception as e: print(e)                  ║                                                         ║                                                         ║                                                         ║                                                         
    }else{                                                 ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
      printf("  file %s?\n",pexfn);                        ║    except Exception as e: print(e)                      ║                                                         ║                                                         ║                                                         ║                                                         
    }                                                      ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
  }else{                                                   ║  else:                                                  ║                                                         ║                                                         ║                                                         ║                                                         
    printf("  parameter?\n");                              ║    print("  parameter?")                                ║                                                         ║                                                         ║                                                         ║                                                         
  }                                                        ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
  return(P);                                               ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
}                                                          ║  return P                                               ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
void iterate(Patch *P){                                    ║def iterate(P):                                          ║PROCEDURE iterate(VAR p: PPatch);                        ║  SUBROUTINE iterate( )                                  ║  public static void iterate(Patch P){                   ║func iterate(P *Patch){                                       
  printf("  iterating\n");                                 ║  print("  iterating")                                   ║                                                         ║    implicit none                                        ║    System.out.println("  iterating");                   ║                                                    
}                                                          ║                                                         ║BEGIN                                                    ║    print *,' iterating'                                 ║  }                                                      ║  fmt.Println("  iterating")                     
                                                           ║                                                         ║  Out.String("  iterating"); Out.Ln;                     ║    RETURN                                               ║                                                         ║                                                         
                                                           ║                                                         ║END iterate;                                             ║  END SUBROUTINE                                         ║                                                         ║}                                             
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
void summarize(Patch *P){                                  ║def summarize(P):                                        ║PROCEDURE summarize(VAR p: PPatch);                      ║  SUBROUTINE summarize( )                                ║  public static void  summarize(Patch P){                ║func summarize(P *Patch){                                     
  printf("  summarizing\n");                               ║  print("  summarizing")                                 ║BEGIN                                                    ║    implicit none                                        ║    System.out.println("  summarizing");                 ║                                                    
}                                                          ║                                                         ║  Out.String("  summarizing"); Out.Ln;                   ║    print *,' summarizing'                               ║                                                         ║  fmt.Println("  summarizing")                   
                                                           ║                                                         ║                                                         ║    RETURN                                               ║  }                                                      ║                                                         
                                                           ║                                                         ║END summarize;                                           ║  END SUBROUTINE                                         ║                                                         ║}                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
int main(int argc, char *argv[]){                          ║if __name__ == "__main__":                               ║BEGIN                                                    ║  SUBROUTINE begin( )                                    ║  public static void main (String[] args)    {           ║func main(){                                                    
  Patch *P;                                                ║  print(" Brainiac")                                     ║  Out.String(" Brainiac"); Out.Ln;                       ║    print *,'Brainiac'                                   ║    Patch P;                                             ║  fmt.Println(" Brainiac")                       
                                                           ║  P = initialize()                                       ║                                                         ║    call initialize()                                    ║    System.out.println(" Brainiac");                     ║                                                         
  printf(" Brainiac\n");                                   ║  iterate(P)                                             ║  initialize(P);                                         ║    call iterate()                                       ║    P=initialize(args);                                  ║  P:=initialize()                                            
  P = initialize(argc,argv);                               ║  summarize(P)                                           ║  iterate(P);                                            ║    call summarize()                                     ║    iterate(P);                                          ║  iterate(P)                                           
  iterate(P);                                              ║                                                         ║  summarize(P);                                          ║                                                         ║    summarize(P);                                        ║  summarize(P)                                             
  summarize(P);                                            ║                                                         ║                                                         ║                                                         ║  }                                                      ║                                                         
  return(0);                                               ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
}                                                          ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║  END SUBROUTINE                                         ║                                                         ║                                                         
                                                           ║                                                         ║END Brainiac.                                            ║END PROGRAM Brainiac                                     ║}                                                        ║}                                            
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
                                                           ║                                                         ║                                                         ║                                                         ║                                                         ║                                                         
